var path = require('path');
/**
 * webpack loader，增加组件 try{}catch(){} 能力
 * @param {String} contents 加载到的组件内容
 */
module.exports = function exports(contents) {
  var file;
  var result;
  this.cacheable();
  file = [this.context.split(path.sep).pop(), this.resourcePath.split(path.sep).pop()].join('/');

  result = require('./jswrap')(contents, file, this.query.trycatchHandler || 'console.error(e)');
  return result;
};

// module.exports = function (contents) {
//   this.cacheable();
//   return 'try {' + contents + ' } catch (err) { module.exports = null; throw Error(err);}';
// };
