# webpack 基础配置套件

* `webpack` 基础配置套件
* 使用者可以复写和增加配置内容
* 包含最基本的 `load、plugin`

 已经包含的 `loader、plugin`

 ```javascript
  loader: {
   style-loader
   css-loader
   file-loader
   url-loader

   // prod 环境
   @cnpm/try-catch-loader
  }
  plugins: {
   extract-text-webpack-plugin
   file-version-webpack-plugin
   clean-webpack-plugin
   webpack.BannerPlugin
   es3ify-webpack-plugin

   // prod 环境包含
   webpack.optimize.ModuleConcatenationPlugin
   webpack.HashedModuleIdsPlugin
   uglifyjs-webpack-plugin
  }
 ```

 环境判断使用 `webpack` CLI 参数 （`env.prod|env.local`）

## Install

`npm install '@cnpm/webpack-dsk';`

## Usage

```javascript
var WebpackDSK = new require('@cnpm/webpack-dsk');
```

项目里的 webpack.config.js 增加代码：

```javascript
// 项目 webpack.config.js
var merge = require('webpack-merge');
var WebpackDSK = new require('@cnpm/webpack-dsk');

module.exports = function (env) {
  // 可以在此处配置自己的 webpack 配置
  return merge(WebpackDSK(env), {
    entry: {
      build: './static/index.js',
    },
  });
};
```

当项目存在异步获取依赖的 JS 组件，需要特殊指定 `publicPath` ，否则将依赖当前页面路径加载 JS 组件

```javascript
if (env && env.prod) {
  publicPath = 'http://n3.static.pg0.cn/fp/项目名称/dist/';
}
```

## Run

  >因为套件依赖 `env` 判断来适配运行环境所以需要制定 `env` 变量

在 `package.json` 文件内配置 `npm` 运行脚本

```json
"build": "webpack --env.local",
"publish": "webpack --env.prod"
```

```bash
# 运行开发环境
npm run build
```

```bash
# 运行生产环境
npm run publish
```

## Options

### env.(local|prod)

用来区分构建环境

### distPath

默认为 `'./static/dist/'`，用来处理 CleanWebpackPlugin 配置 和 output 参数配置

### publicPath

默认会对 `distPath` 参数进行绝对地址转换，默认为 `/static/dist/`

## 1.4.3

* 增加开发环境生成的 source map 为 eval 以增加构建速度

## 1.4.2

* 修复异常抛出功能

## 1.4.1

* 增加构建时间注释
* 修改 try-catch-loader 在生产环境才会生效

## 1.4.0

* 增加 @cnpm/try-catch-loader 处理组件异常
* 在组件描述增加 es3ify-webpack-plugin 提示

## 1.3.0

* 提取 publicPath 定义变量
* 修复 CleanWebpackPlugin 失效问题
* 升级 webpack 3.11.0
* 更新项目描述文件

## 1.2.5

* es3ify-webpack-plugin 替换 es3ify-loader

## 1.2.4

* 增加 es3ify-webpack-plugin 插件，增加 node_modules 下组件 IE 低版本 JavaScript 关键字支持

## 1.2.3

* 增加 es3ify-loader 处理关键字引号处理，避免 IE 低版本错误

## 1.2.2

* 处理依赖组件存在 node_module 无法编译的问题

## 1.2.1

* 修改启动 server 服务时 publicPath 错误问题

## 1.2.0

* 增加 webpack-dev-server 支持，增加 publicPath 参数

## 1.1.3

* 增加默认 local 开发环境配置

## 1.1.2

* 处理 file-version-webpack-plugin 没有默认安装的问题

## 1.1.1

* 修复安装包依赖问题

## 1.1.0

* 描述文件增加组件包含的 loader、plugin 说明
* 增加 dist 目录配置

## 1.0.1

* webpack 基础配置套件
* 处理本地项目执行路径问题
